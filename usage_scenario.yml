# usage_scenario.yml
name: co2-aware-prototype
author: Ludwig Herbe
description: Measurement scenario for CO2-Aware prototype (Playwright flow, backend+frontend+db+testrunner)
compose-file: !include docker-compose.yml

services:
  db:
    ports: []
    volumes: []
  backend:
    ports: []
    environment:
      DB_HOST: co2-aware-db
      DB_USER: user
      DB_PASSWORD: password
      DB_NAME: co2_aware_db
      DB_PORT: 5432
    log-stdout: true
  frontend:
    ports: []
    log-stdout: true
  testrunner:
    entrypoint: ""
    volumes: []
    command: "sh -c 'sleep infinity'"
    log-stdout: true
    read-notes-stdout: true


flow:
  - name: Playwright run
    container: co2-aware-testrunner
    commands:
      - type: console
        command: "npx playwright test"
        read-notes-stdout: true
      - type: console
        command: "sleep 20"